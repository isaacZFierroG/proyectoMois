import{D as O,t as q,g as t,m as k,E as G,_ as T,o as n,c as l,f as s,y as A,z as B,F as U,h as w,q as E,k as j,B as J,s as K,p as P,e as Q}from"./index.3af4880e.js";const W="http://3.101.0.40:8000/api/",I=O.create({baseURL:W}),D="modulos/",h=localStorage;`${h.getItem("access")}`;const X={get(){return console.log(h.getItem("access")),I.get(D,{headers:{Authorization:`Bearer ${h.getItem("access")}`,"Content-type":"application/json; charset=utf-8"}})},create(r){return I.post(D,r,{headers:{Authorization:`Bearer ${h.getItem("access")}`,"Content-type":"application/json; charset=utf-8"}})},retrieve(r){return I.get(`${D}${r}/`,{headers:{Authorization:`Bearer ${h.getItem("access")}`,"Content-type":"application/json; charset=utf-8"}})}},Y=(r,{emit:a})=>{const{verFormulario:p}=q(r),e=t(""),u=t(""),i=t(""),o=t([]),c=t(0),_=t(!1),v=t(!1),f=t(!1),g=t(!1),y=t(["HERMOSILLO","CANANEA"]),C=t(["A","B","C","D"]),x=()=>a("refrescarModulos"),S=()=>{e.value="",u.value="",i.value="",o.value=[]},m=()=>{g.value=!1,f.value=!1,v.value=!1,_.value=!1},M=()=>{S(),m(),a("ocultarFormulario")},F=()=>{if(!N.value){m(),_.value=!0;return}m(),c.value++;const d={clave:`${e.value}-${c.value}`};o.value.push(d)},z=()=>{c.value!==0&&(c.value--,o.value.pop())},V=async()=>{if(m(),!R.value){g.value=!0;return}try{const d=await X.create({mac:e.value.toUpperCase(),mina:u.value.toUpperCase(),area:i.value.toUpperCase(),sensores:o.value}),{data:H}=await d;x(),S(),v.value=!0}catch{f.value=!0}},L=k(()=>({"ocultar-layout":!p.value})),N=k(()=>!!e.value.length),R=k(()=>!!e.value.length&&!!u.value.length&&!!i.value.length);return G(e,(d,H)=>{d.length||(c.value=0)}),{verFormulario:p,mac:e,mina:u,area:i,sensores:o,numeroSensores:c,mensajeSensores:_,mensajeExito:v,mensajeError:f,mensajeCampos:g,minas:y,areas:C,mostrarFormulario:L,crearModulo:V,ocultarFormulario:M,agregarSensores:F,eliminarSensores:z}};const Z={props:{verFormulario:{type:Boolean,default:!1}},setup(r,a){const{verFormulario:p,mac:e,mina:u,area:i,sensores:o,numeroSensores:c,mensajeSensores:_,mensajeExito:v,mensajeError:f,mensajeCampos:g,minas:y,areas:C,mostrarFormulario:x,crearModulo:S,ocultarFormulario:m,agregarSensores:M,eliminarSensores:F}=Y(r,a);return{verFormulario:p,mac:e,mina:u,area:i,sensores:o,numeroSensores:c,mensajeSensores:_,mensajeExito:v,mensajeError:f,mensajeCampos:g,minas:y,areas:C,mostrarFormulario:x,crearModulo:S,ocultarFormulario:m,agregarSensores:M,eliminarSensores:F}}},b=r=>(P("data-v-295dc10c"),r=r(),Q(),r),$=b(()=>s("h2",{class:"txt-upper blanco-a titulo-modulo"},"Crear modulo",-1)),ee=b(()=>s("p",{class:"blanco-a form__label"},"Mac",-1)),oe=b(()=>s("p",{class:"blanco-a form__label"},"Mina",-1)),ae={class:"form__input",id:"minas"},se=["value"],re=b(()=>s("p",{class:"blanco-a form__label"},"Area",-1)),te={class:"form__input",id:"areas"},ne=["value"],le={class:"sensores"},ce=b(()=>s("input",{type:"submit",class:"boton-crear boton-modulo blanco-a txt-upper",value:"Guardar"},null,-1)),ue={key:0,class:"mensaje mensaje--error"},ie={key:1,class:"mensaje mensaje--error"},me={key:2,class:"mensaje mensaje--error"},de={key:3,class:"mensaje mensaje--exito"};function pe(r,a,p,e,u,i){return n(),l("div",{class:K(["layout-modulo-form",e.mostrarFormulario])},[s("button",{class:"txt-upper blanco-a titulo-modulo boton-cerrar",onClick:a[0]||(a[0]=(...o)=>e.ocultarFormulario&&e.ocultarFormulario(...o))}," x "),$,s("form",{class:"form",onSubmit:a[6]||(a[6]=J((...o)=>e.crearModulo&&e.crearModulo(...o),["prevent"]))},[ee,A(s("input",{type:"text",class:"form__input","onUpdate:modelValue":a[1]||(a[1]=o=>e.mac=o)},null,512),[[B,e.mac]]),oe,A(s("input",{type:"text",list:"minas",class:"form__input","onUpdate:modelValue":a[2]||(a[2]=o=>e.mina=o)},null,512),[[B,e.mina]]),s("datalist",ae,[(n(!0),l(U,null,w(e.minas,o=>(n(),l("option",{key:o,value:o},E(o),9,se))),128))]),re,A(s("input",{type:"text",list:"areas",class:"form__input","onUpdate:modelValue":a[3]||(a[3]=o=>e.area=o)},null,512),[[B,e.area]]),s("datalist",te,[(n(!0),l(U,null,w(e.areas,o=>(n(),l("option",{key:o,value:o},E(o),9,ne))),128))]),s("section",le,[s("div",{class:"sensores__boton blanco-a",onClick:a[4]||(a[4]=(...o)=>e.eliminarSensores&&e.eliminarSensores(...o))}," - "),s("p",null,"Sensores: "+E(e.numeroSensores),1),s("div",{class:"sensores__boton blanco-a",onClick:a[5]||(a[5]=(...o)=>e.agregarSensores&&e.agregarSensores(...o))}," + ")]),ce,e.mensajeSensores?(n(),l("p",ue," Debes de agregar una MAC antes de agregar sensores ")):j("",!0),e.mensajeCampos?(n(),l("p",ie,"Debes de llenar todos los campos antes de guardar")):j("",!0),e.mensajeError?(n(),l("p",me,"Debes de llenar todos los campos")):j("",!0),e.mensajeExito?(n(),l("p",de,"Modulo creado exitosamente")):j("",!0)],32)],2)}const ve=T(Z,[["render",pe],["__scopeId","data-v-295dc10c"]]);export{ve as default};
