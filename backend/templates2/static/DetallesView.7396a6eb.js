import{_ as w,d as x,l as P,t as R,g as m,m as h,n as C,r as G,o as t,c as n,f as s,q as i,F as M,h as N,k as A,b,a as B,s as E,p as F,e as L}from"./index.3af4880e.js";import{m as z}from"./modulosService.9ce8a15a.js";const O={components:{Grafica:x(()=>B(()=>import("./Grafica.2bef6e2c.js"),["static/Grafica.2bef6e2c.js","static/index.3af4880e.js","static/index.64017e9b.css"]))},setup(){const l=P(),{params:p}=R(l),d=m(null),o=m(null),f=2e4,_=m(null),u=e=>Math.max(...e.map(a=>a.datos.length)),r=(e,a)=>e.map(c=>{for(;c.datos.length<a;)c.datos.push({valor:0});return c}),k=()=>{clearInterval(o.value),o.value=null},g=async()=>{try{const a=await(await z.retrieve(p.value.id)).data,c=u(a.sensores);console.log(r(a.sensores,c)),d.value=a,_.value=a.sensores.map(y=>({name:y.clave,data:y.datos.map(D=>D.valor).reverse()})),console.log(a),console.log("DATOS PARA GRAFICAR"),console.log(_.value)}catch(e){console.log(e)}},I=h(()=>d.value.sensores||0),S=h(()=>e=>e.length?e[0].estado?"sensor--activo":"sensor--inactivo":"sensor--sinestado"),V=h(()=>e=>e.length?e[0].valor:"N/E");return g(),o.value=setInterval(()=>{g()},f),C(()=>k()),{modulo:d,referenciaPeticion:o,sensores:I,estadoSensor:S,ultimoValor:V,datos:_}}},v=l=>(F("data-v-d51ea746"),l=l(),L(),l),T={key:0,class:"modulo"},U={class:"info"},q={class:"info__titulo"},Z={class:"info__zona"},j={class:"info__mina"},H=v(()=>s("hr",null,null,-1)),J={key:0,class:"sensores"},K={class:"sensor__clave"},Q=v(()=>s("hr",null,null,-1)),W={key:1,class:"grafica"},X=v(()=>s("h2",null,"Grafica de datos",-1)),Y={key:2};function $(l,p,d,o,f,_){const u=G("Grafica");return t(),n("div",null,[o.modulo?(t(),n("article",T,[s("section",U,[s("h1",q,i(o.modulo.mac),1),s("section",null,[s("p",Z,"Zona: "+i(o.modulo.area),1),s("p",j,"Mina: "+i(o.modulo.mina),1)])]),H,o.sensores?(t(),n("section",J,[(t(!0),n(M,null,N(o.sensores,r=>(t(),n("article",{class:E(["sensor",o.estadoSensor(r.datos)]),key:r},[s("p",K,i(r.clave),1),Q,s("p",null,"Ultimo valor: "+i(o.ultimoValor(r.datos)),1)],2))),128))])):A("",!0)])):A("",!0),o.datos.length?(t(),n("section",W,[X,b(u,{datos:o.datos},null,8,["datos"])])):(t(),n("h2",Y,"No hay datos disponibles"))])}const so=w(O,[["render",$],["__scopeId","data-v-d51ea746"]]);export{so as default};
