import{n as J,W as Q,z as ve,B as O,k as I,Z as se,X as G,q as D,L as Se,ah as Be,a6 as be,b5 as Ie,az as we,m as P,H as Te,E as oe,v as T,b6 as Ee,b7 as Ae,l as j,ax as ue,ai as K,aj as ke,ak as ae}from"./index-25a1633d.js";import{a as Fe,d as Oe,p as Le,g as Ne,b as de,z as Ve,L as Xe}from"./fade-in-scale-up.cssr-a8000d20.js";import{j as Z,h as Ye}from"./service-ec2a6b46.js";import{i as Ce,b as ye}from"./Grid-d8533d20.js";function rt(n,e){let{target:t}=n;for(;t;){if(t.dataset&&t.dataset[e]!==void 0)return!0;t=t.parentElement}return!1}let N,H;const _e=()=>{var n,e;N=Ce?(e=(n=document)===null||n===void 0?void 0:n.fonts)===null||e===void 0?void 0:e.ready:void 0,H=!1,N!==void 0?N.then(()=>{H=!0}):H=!0};_e();function We(n){if(H)return;let e=!1;J(()=>{H||N==null||N.then(()=>{e||n()})}),Q(()=>{e=!0})}const st=ve("n-internal-select-menu"),je=ve("n-internal-select-menu-body"),ge="__disabled__";function xe(n){const e=O(Fe,null),t=O(Oe,null),l=O(Le,null),i=O(je,null),d=I();if(typeof document<"u"){d.value=document.fullscreenElement;const f=()=>{d.value=document.fullscreenElement};J(()=>{se("fullscreenchange",document,f)}),Q(()=>{G("fullscreenchange",document,f)})}return Z(()=>{var f;const{to:c}=n;return c!==void 0?c===!1?ge:c===!0?d.value||"body":c:e!=null&&e.value?(f=e.value.$el)!==null&&f!==void 0?f:e.value:t!=null&&t.value?t.value:l!=null&&l.value?l.value:i!=null&&i.value?i.value:c??(d.value||"body")})}xe.tdkey=ge;xe.propTo={type:[String,Object,Boolean],default:void 0};let k=null;function Me(){if(k===null&&(k=document.getElementById("v-binder-view-measurer"),k===null)){k=document.createElement("div"),k.id="v-binder-view-measurer";const{style:n}=k;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(k)}return k.getBoundingClientRect()}function He(n,e){const t=Me();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function ie(n){const e=n.getBoundingClientRect(),t=Me();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function De(n){return n.nodeType===9?null:n.parentNode}function $e(n){if(n===null)return null;const e=De(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:l,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+i+l))return e}return $e(e)}const Pe=D({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Se("VBinder",(e=Be())===null||e===void 0?void 0:e.proxy);const t=O("VBinder",null),l=I(null),i=a=>{l.value=a,t&&n.syncTargetWithParent&&t.setTargetRef(a)};let d=[];const f=()=>{let a=l.value;for(;a=$e(a),a!==null;)d.push(a);for(const $ of d)se("scroll",$,B,!0)},c=()=>{for(const a of d)G("scroll",a,B,!0);d=[]},u=new Set,w=a=>{u.size===0&&f(),u.has(a)||u.add(a)},S=a=>{u.has(a)&&u.delete(a),u.size===0&&c()},B=()=>{ye(s)},s=()=>{u.forEach(a=>a())},h=new Set,v=a=>{h.size===0&&se("resize",window,b),h.has(a)||h.add(a)},p=a=>{h.has(a)&&h.delete(a),h.size===0&&G("resize",window,b)},b=()=>{h.forEach(a=>a())};return Q(()=>{G("resize",window,b),c()}),{targetRef:l,setTargetRef:i,addScrollListener:w,removeScrollListener:S,addResizeListener:v,removeResizeListener:p}},render(){return Ne("binder",this.$slots)}}),ut=Pe,at=D({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=O("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?be(de("follower",this.$slots),[[e]]):de("follower",this.$slots)}}),{c:L}=Ie(),ze="vueuc-style";function fe(n){return n&-n}class Ke{constructor(e,t){this.l=e,this.min=t;const l=new Array(e+1);for(let i=0;i<e+1;++i)l[i]=0;this.ft=l}add(e,t){if(t===0)return;const{l,ft:i}=this;for(e+=1;e<=l;)i[e]+=t,e+=fe(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:l,l:i}=this;if(e>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let d=e*l;for(;e>0;)d+=t[e],e-=fe(e);return d}getBound(e){let t=0,l=this.l;for(;l>t;){const i=Math.floor((t+l)/2),d=this.sum(i);if(d>e){l=i;continue}else if(d<e){if(t===i)return this.sum(t+1)<=e?t+1:i;t=i}else return i}return t}}const U={top:"bottom",bottom:"top",left:"right",right:"left"},he={start:"end",center:"center",end:"start"},le={top:"height",bottom:"height",left:"width",right:"width"},Ue={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},qe={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ge={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},pe={top:!0,bottom:!1,left:!0,right:!1},ce={top:"end",bottom:"start",left:"end",right:"start"};function Ze(n,e,t,l,i,d){if(!i||d)return{placement:n,top:0,left:0};const[f,c]=n.split("-");let u=c??"center",w={top:0,left:0};const S=(h,v,p)=>{let b=0,a=0;const $=t[h]-e[v]-e[h];return $>0&&l&&(p?a=pe[v]?$:-$:b=pe[v]?$:-$),{left:b,top:a}},B=f==="left"||f==="right";if(u!=="center"){const h=Ge[n],v=U[h],p=le[h];if(t[p]>e[p]){if(e[h]+e[p]<t[p]){const b=(t[p]-e[p])/2;e[h]<b||e[v]<b?e[h]<e[v]?(u=he[c],w=S(p,v,B)):w=S(p,h,B):u="center"}}else t[p]<e[p]&&e[v]<0&&e[h]>e[v]&&(u=he[c])}else{const h=f==="bottom"||f==="top"?"left":"top",v=U[h],p=le[h],b=(t[p]-e[p])/2;(e[h]<b||e[v]<b)&&(e[h]>e[v]?(u=ce[h],w=S(p,h,B)):(u=ce[v],w=S(p,v,B)))}let s=f;return e[f]<t[le[f]]&&e[f]<e[U[f]]&&(s=U[f]),{placement:u!=="center"?`${s}-${u}`:s,left:w.left,top:w.top}}function Je(n,e){return e?qe[n]:Ue[n]}function Qe(n,e,t,l,i,d){if(d)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+l)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+l)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+l)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+l)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+l)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+l)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+l)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+l)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+l)}px`,left:`${Math.round(t.left-e.left+t.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+l)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+l)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+l)}px`,left:`${Math.round(t.left-e.left+t.width/2+i)}px`,transform:"translateX(-50%)"}}}const Re=L([L(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),L(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[L("> *",{pointerEvents:"all"})])]),dt=D({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=O("VBinder"),t=Z(()=>n.enabled!==void 0?n.enabled:n.show),l=I(null),i=I(null),d=()=>{const{syncTrigger:s}=n;s.includes("scroll")&&e.addScrollListener(u),s.includes("resize")&&e.addResizeListener(u)},f=()=>{e.removeScrollListener(u),e.removeResizeListener(u)};J(()=>{t.value&&(u(),d())});const c=we();Re.mount({id:"vueuc/binder",head:!0,anchorMetaName:ze,ssr:c}),Q(()=>{f()}),We(()=>{t.value&&u()});const u=()=>{if(!t.value)return;const s=l.value;if(s===null)return;const h=e.targetRef,{x:v,y:p,overlap:b}=n,a=v!==void 0&&p!==void 0?He(v,p):ie(h);s.style.setProperty("--v-target-width",`${Math.round(a.width)}px`),s.style.setProperty("--v-target-height",`${Math.round(a.height)}px`);const{width:$,minWidth:V,placement:X,internalShift:Y,flip:R}=n;s.setAttribute("v-placement",X),b?s.setAttribute("v-overlap",""):s.removeAttribute("v-overlap");const{style:E}=s;$==="target"?E.width=`${a.width}px`:$!==void 0?E.width=$:E.width="",V==="target"?E.minWidth=`${a.width}px`:V!==void 0?E.minWidth=V:E.minWidth="";const ee=ie(s),C=ie(i.value),{left:_,top:o,placement:r}=Ze(X,a,ee,Y,R,b),m=Je(r,b),{left:y,top:g,transform:M}=Qe(r,C,a,o,_,b);s.setAttribute("v-placement",r),s.style.setProperty("--v-offset-left",`${Math.round(_)}px`),s.style.setProperty("--v-offset-top",`${Math.round(o)}px`),s.style.transform=`translateX(${y}) translateY(${g}) ${M}`,s.style.setProperty("--v-transform-origin",m),s.style.transformOrigin=m};P(t,s=>{s?(d(),w()):f()});const w=()=>{Te().then(u).catch(s=>console.error(s))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(s=>{P(oe(n,s),u)}),["teleportDisabled"].forEach(s=>{P(oe(n,s),w)}),P(oe(n,"syncTrigger"),s=>{s.includes("resize")?e.addResizeListener(u):e.removeResizeListener(u),s.includes("scroll")?e.addScrollListener(u):e.removeScrollListener(u)});const S=Ye(),B=Z(()=>{const{to:s}=n;if(s!==void 0)return s;S.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:i,followerRef:l,mergedTo:B,syncPosition:u}},render(){return T(Xe,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=T("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[T("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?be(t,[[Ve,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});let q;function et(){return q===void 0&&("matchMedia"in window?q=window.matchMedia("(pointer:coarse)").matches:q=!1),q}let re;function me(){return re===void 0&&(re="chrome"in window?window.devicePixelRatio:1),re}const tt=L(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[L("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[L("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),ft=D({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=we();tt.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:ze,ssr:e}),J(()=>{const{defaultScrollIndex:o,defaultScrollKey:r}=n;o!=null?v({index:o}):r!=null&&v({key:r})});let t=!1,l=!1;Ee(()=>{if(t=!1,!l){l=!0;return}v({top:B.value,left:S})}),Ae(()=>{t=!0,l||(l=!0)});const i=j(()=>{const o=new Map,{keyField:r}=n;return n.items.forEach((m,y)=>{o.set(m[r],y)}),o}),d=I(null),f=I(void 0),c=new Map,u=j(()=>{const{items:o,itemSize:r,keyField:m}=n,y=new Ke(o.length,r);return o.forEach((g,M)=>{const x=g[m],z=c.get(x);z!==void 0&&y.add(M,z)}),y}),w=I(0);let S=0;const B=I(0),s=Z(()=>Math.max(u.value.getBound(B.value-ue(n.paddingTop))-1,0)),h=j(()=>{const{value:o}=f;if(o===void 0)return[];const{items:r,itemSize:m}=n,y=s.value,g=Math.min(y+Math.ceil(o/m+1),r.length-1),M=[];for(let x=y;x<=g;++x)M.push(r[x]);return M}),v=(o,r)=>{if(typeof o=="number"){$(o,r,"auto");return}const{left:m,top:y,index:g,key:M,position:x,behavior:z,debounce:A=!0}=o;if(m!==void 0||y!==void 0)$(m,y,z);else if(g!==void 0)a(g,z,A);else if(M!==void 0){const te=i.value.get(M);te!==void 0&&a(te,z,A)}else x==="bottom"?$(0,Number.MAX_SAFE_INTEGER,z):x==="top"&&$(0,0,z)};let p,b=null;function a(o,r,m){const{value:y}=u,g=y.sum(o)+ue(n.paddingTop);if(!m)d.value.scrollTo({left:0,top:g,behavior:r});else{p=o,b!==null&&window.clearTimeout(b),b=window.setTimeout(()=>{p=void 0,b=null},16);const{scrollTop:M,offsetHeight:x}=d.value;if(g>M){const z=y.get(o);g+z<=M+x||d.value.scrollTo({left:0,top:g+z-x,behavior:r})}else d.value.scrollTo({left:0,top:g,behavior:r})}}function $(o,r,m){d.value.scrollTo({left:o,top:r,behavior:m})}function V(o,r){var m,y,g;if(t||n.ignoreItemResize||_(r.target))return;const{value:M}=u,x=i.value.get(o),z=M.get(x),A=(g=(y=(m=r.borderBoxSize)===null||m===void 0?void 0:m[0])===null||y===void 0?void 0:y.blockSize)!==null&&g!==void 0?g:r.contentRect.height;if(A===z)return;A-n.itemSize===0?c.delete(o):c.set(o,A-n.itemSize);const W=A-z;if(W===0)return;M.add(x,W);const F=d.value;if(F!=null){if(p===void 0){const ne=M.sum(x);F.scrollTop>ne&&F.scrollBy(0,W)}else if(x<p)F.scrollBy(0,W);else if(x===p){const ne=M.sum(x);A+ne>F.scrollTop+F.offsetHeight&&F.scrollBy(0,W)}C()}w.value++}const X=!et();let Y=!1;function R(o){var r;(r=n.onScroll)===null||r===void 0||r.call(n,o),(!X||!Y)&&C()}function E(o){var r;if((r=n.onWheel)===null||r===void 0||r.call(n,o),X){const m=d.value;if(m!=null){if(o.deltaX===0&&(m.scrollTop===0&&o.deltaY<=0||m.scrollTop+m.offsetHeight>=m.scrollHeight&&o.deltaY>=0))return;o.preventDefault(),m.scrollTop+=o.deltaY/me(),m.scrollLeft+=o.deltaX/me(),C(),Y=!0,ye(()=>{Y=!1})}}}function ee(o){if(t||_(o.target)||o.contentRect.height===f.value)return;f.value=o.contentRect.height;const{onResize:r}=n;r!==void 0&&r(o)}function C(){const{value:o}=d;o!=null&&(B.value=o.scrollTop,S=o.scrollLeft)}function _(o){let r=o;for(;r!==null;){if(r.style.display==="none")return!0;r=r.parentElement}return!1}return{listHeight:f,listStyle:{overflow:"auto"},keyToIndex:i,itemsStyle:j(()=>{const{itemResizable:o}=n,r=K(u.value.sum());return w.value,[n.itemsStyle,{boxSizing:"content-box",height:o?"":r,minHeight:o?r:"",paddingTop:K(n.paddingTop),paddingBottom:K(n.paddingBottom)}]}),visibleItemsStyle:j(()=>(w.value,{transform:`translateY(${K(u.value.sum(s.value))})`})),viewportItems:h,listElRef:d,itemsElRef:I(null),scrollTo:v,handleListResize:ee,handleListScroll:R,handleListWheel:E,handleItemResize:V}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:l}=this;return T(ae,{onResize:this.handleListResize},{default:()=>{var i,d;return T("div",ke(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?T("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[T(l,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(f=>{const c=f[e],u=t.get(c),w=this.$slots.default({item:f,index:u})[0];return n?T(ae,{key:c,onResize:S=>this.handleItemResize(c,S)},{default:()=>w}):(w.key=c,w)})})]):(d=(i=this.$slots).empty)===null||d===void 0?void 0:d.call(i)])}})}}),ht=D({props:{onFocus:Function,onBlur:Function},setup(n){return()=>T("div",{style:"width: 0; height: 0",tabindex:0,onFocus:n.onFocus,onBlur:n.onBlur})}});export{ht as F,ut as V,at as a,dt as b,ft as c,L as d,ze as e,je as f,rt as h,st as i,xe as u};
